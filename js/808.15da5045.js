"use strict";(self["webpackChunkjeju_cafeteria"]=self["webpackChunkjeju_cafeteria"]||[]).push([[808],{9808:function(t,e,a){a.r(e),a.d(e,{default:function(){return W}});var i=a(6252),s=a(9963),d=a(3577);const n={class:"d-flex justify-content-end"},o=(0,i._)("a",null,"식사선택",-1),l=["value"],r={class:"align-self-center"},c={key:0},u={key:1},h=(0,i._)("div",{class:"d-flex justify-content-end"},[(0,i._)("button",{type:"submit",class:"btn btn-primary"},"확정")],-1);function b(t,e,a,b,p,w){const g=(0,i.up)("Header"),m=(0,i.up)("VDatePicker");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(g),(0,i._)("form",{onSubmit:e[1]||(e[1]=(0,s.iM)(((...t)=>w.handleSubmit&&w.handleSubmit(...t)),["prevent"]))},[(0,i._)("div",n,[o,(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>p.op_selected=t)},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(p.options,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t.value,value:t.value},(0,d.zw)(t.text),9,l)))),128))],512),[[s.bM,p.op_selected]])]),(0,i._)("div",r,["one"===p.op_selected?((0,i.wg)(),(0,i.iD)("span",c,[(0,i.Wm)(m,{attributes:w.attributes,onDayclick:w.onDayClick,mode:"multiple","disabled-dates":p.disabledDates,color:p.selectedColor,"min-date":new Date,"disabled-attribute":p.disabledAttribute,class:"my-calendar"},null,8,["attributes","onDayclick","disabled-dates","color","min-date","disabled-attribute"])])):(0,i.kq)("",!0),"range"===p.op_selected?((0,i.wg)(),(0,i.iD)("span",u,[(0,i.Wm)(m,{attributes:w.attributes,onDayclick:w.onRangeClick,range:"","disabled-dates":p.disabledDates,color:p.selectedColor,"min-date":new Date,"disabled-attribute":p.disabledAttribute,class:"my-calendar"},null,8,["attributes","onDayclick","disabled-dates","color","min-date","disabled-attribute"])])):(0,i.kq)("",!0)]),h],32),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(this.getTicketList,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id},(0,d.zw)(t.id)+" "+(0,d.zw)(t.date),1)))),128))],64)}a(560);var p=a(2262);const w=t=>((0,i.dD)("data-v-6da0c1ae"),t=t(),(0,i.Cn)(),t),g={id:"nav"},m={class:"d-flex align-items-center justify-content-between"},D=w((()=>(0,i._)("h4",null,"제주지방기상청",-1)));function f(t,e,a,s,n,o){const l=(0,i.up)("b-button");return(0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("nav",m,[D,(0,i._)("label",null,(0,d.zw)(this.getUserName)+"님 환영합니다. 계정 : "+(0,d.zw)(this.getEmail),1),(0,i.Wm)(l,{pill:"",variant:"outline-danger",size:"sm",onClick:this.signOut},{default:(0,i.w5)((()=>[(0,i.Uk)("로그아웃")])),_:1},8,["onClick"])])])}var y={computed:{getUserName(){return this.$store.state.auth.user.username},getEmail(){return this.$store.state.auth.user.email}},methods:{signOut(){this.$store.dispatch("signOut")}}},k=a(3744);const v=(0,k.Z)(y,[["render",f],["__scopeId","data-v-6da0c1ae"]]);var _=v;const S=(0,p.iH)("one"),C=(0,p.iH)("0");var H=(0,p.iH)(),O=(0,p.iH)(),T=(0,p.iH)([]);const x=(0,p.iH)("white"),z=(0,p.iH)([{text:"하루씩",value:"one"},{text:"범위지정",value:"range"}]),$=(0,p.iH)([{repeat:{weekdays:[1,7]}}]),I=(0,p.iH)([{contentStyle:{color:"red"},contentHoverStyle:{cursor:"default",backgroundColor:"transparent"}}]),j=[{description:"설렁탕 탕수육 팔보채",isComplete:!1,dates:new Date,color:"#ff8080"}];var E={name:"HomeView",components:{Header:_},data(){return{days:T,twin_days:[],op_selected:S,options:z,date:new Date,disabledDates:$,selectedColor:x,disabledAttribute:I,newTicket:{id:"",date:"",uid:"",created_at:0},todos:j}},computed:{getTicketList(){return this.$store.state.tickets.ticketList},dates(){return this.days.map((t=>t.date))},attributes(){return[{contentStyle:{fontWeight:"700",fontSize:".9rem"},dates:new Date},...this.todos.map((t=>({dates:t.dates,dot:{backgroundColor:t.color,opacity:t.isComplete?.3:1},popover:{label:t.description}}))),...this.dates.map((t=>({highlight:"blue",dates:t})))]}},watch:{getTicketList(t){this.days=t;let e=[];t.forEach((t=>{e.push(t)})),this.twin_days=e}},mounted(){this.$store.dispatch("fetchTicketList")},methods:{onDayClick(t){const e=new Date,a=6e4*(new Date).getTimezoneOffset(),i=new Date(t.date-a);let s=i.toISOString().split("T")[0],d=e.toISOString().split("T")[0];if(s>=d){const e=this.days.findIndex((e=>e.id===t.id));if(e>=0)this.days.splice(e,1);else{let e=this.dateDisabled(i);e||this.days.push({id:t.id,date:i.toISOString(),uid:this.$store.state.auth.user.uid,created_at:Date.now()})}}},onRangeClick(t){0==C.value?(C.value=1,H=t.date):(O=t.date,this.getDateRange(H,O))},getDateRange(t,e){let a=new Date(t),i=new Date(e);if(a>i){var s=a;a=i,i=s}while(a<=i){const t=6e4*(new Date).getTimezoneOffset(),e=new Date(a-t);var d={id:e.toISOString().split("T")[0],date:e.toISOString()};const i=this.days.findIndex((t=>t.id===d.id));if(-1===i){const t=new Date(d.date);let e=this.dateDisabled(t);e||this.days.push({id:d.id,date:d.date,uid:this.$store.state.auth.user.uid,created_at:Date.now()})}a.setDate(a.getDate()+1)}},async handleSubmit(){let t=[];this.days.forEach((e=>{const a=new Date(e.date);let i=this.dateDisabled(a);i||t.push(e)})),t.forEach((t=>{-1===this.twin_days.indexOf(t)&&this.$store.dispatch("addNewTicket",t)})),this.days=t,this.twin_days.forEach((t=>{-1===this.days.indexOf(t)&&this.$store.dispatch("deleteTicket",t.id)}))},dateDisabled(t){const e=t.getDay();return 0===e||6===e}}};const L=(0,k.Z)(E,[["render",b]]);var W=L}}]);
//# sourceMappingURL=808.15da5045.js.map