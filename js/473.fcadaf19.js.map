{"version":3,"file":"js/473.fcadaf19.js","mappings":"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","sources":["webpack://jeju-cafeteria/./src/views/TicketCountView.vue","webpack://jeju-cafeteria/./src/views/TicketCountView.vue?07f8"],"sourcesContent":["<template>\r\n    <div style=\"text-align: center;\" class=\"btile\">\r\n        <h1>오 늘 식 수</h1>\r\n        <h5>( {{ today_s }} )</h5>\r\n    </div>\r\n    <div table-responsive>\r\n        <table class=\"table table-sm table-hover\">\r\n            <thead class=\"thead-dark\">\r\n                <tr>\r\n                    <th scope=\"col\">성   명</th>\r\n                    <th scope=\"col\">계정메일</th>\r\n                    <th scope=\"col\">전화번호</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr v-for=\"user in this.eatusers\" :key=\"user.uid\">\r\n                    <td scope=\"row\">{{user.username}}</td>\r\n                    <td scope=\"row\">{{user.email}}</td>\r\n                    <td scope=\"row\">{{user.telnum}}</td>                    \r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class=\"mb-3 border bg-warning border-warning rounded p-2\" style=\"--bs-bg-opacity: 0.2\" v-if=\"!!this.message\" >\r\n                {{ this.message }}\r\n    </div>\r\n    <div class=\"total\"> \r\n        <h3>오늘 식수 : <span class=\"eat\">{{this.ticketLength}}</span> /전체 : {{usersLength}} 명</h3>\r\n    </div>\r\n    <div class=\"footer\">\r\n        <b-container>\r\n            <b-row>\r\n                <b-col cols=\"2\"></b-col>\r\n                <b-col cols=\"2\"><b-button class=\"btn\" variant=\"primary\" to=\"/home\" size=\"lg\" >홈</b-button></b-col>\r\n                <b-col cols=\"6\"><download-excel class=\"btn btn-primary\" :data=\"this.eatusers\" :fields=\"eatusers_fields\" \r\n                            worksheet=\"이용자\" :name=\"this.excelfname\" size=\"lg\" >식수 내려받기(엑셀)</download-excel></b-col>            \r\n                <b-col cols=\"1\"></b-col>\r\n            </b-row>\r\n        </b-container>   \r\n    </div>    \r\n    \r\n</template>\r\n\r\n<script>\r\nimport {ref} from 'vue';\r\nimport JsonExcel from \"vue-json-excel3\";\r\n\r\nconst in_ticketLength = ref(0);\r\nconst eatusers=ref([]);\r\nconst excelfname=ref('');\r\n\r\nexport default {\r\n    name: \"TicketCount\",\r\n    components: { \r\n        downloadExcel:JsonExcel\r\n    },\r\n    data() {\r\n        return{\r\n            ticketLength: in_ticketLength,\r\n            eatusers: eatusers,\r\n            message: \"\",\r\n            today_s: \"\",\r\n            usersLength:0,\r\n            eatusers_fields: {\r\n                \"번호\":\"index\",\r\n                \"성명\": \"username\",\r\n                \"메일\": \"email\",\r\n                \"전화번호\": \"telnum\",\r\n                \"확정일자\": \"create_at\",\r\n            },\r\n            excelfname:excelfname,\r\n        }        \r\n    },\r\n    filters: {\r\n        formatDate(value) {\r\n        return new Date(value).toLocaleDateString();\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$store.dispatch(\"fetchAlluserList\");\r\n\r\n        const today = new Date();\r\n        const year = today.getFullYear();\r\n        const month = today.getMonth()+1;\r\n        const day = today.getDate();\r\n        \r\n        var todayString = year + \"-\";\r\n        if (month < 10) {\r\n            todayString += \"0\";\r\n        }\r\n        todayString += month + \"-\";\r\n        if (day < 10) {\r\n            todayString += \"0\";\r\n        }\r\n        todayString += day;\r\n\r\n        this.excelfname = todayString+'_jejucafetria.xls';        \r\n        this.today_s = today.getFullYear()+'년  '+today.getMonth()+'월  '+today.getDate()+'일';\r\n        this.$store.dispatch(\"fetchAllTicketList\", todayString);                \r\n    },\r\n    watch:{\r\n        getAllTicketList(val){\r\n            if ( val.length > 0) {                \r\n                var users = this.$store.state.auth.userList;\r\n                this.usersLength = users.length;\r\n                \r\n                if (users.length<0) {\r\n                    this.$store.dispatch(\"fetchAlluserList\");\r\n                    users = this.$store.state.auth.userList;\r\n                    this.usersLength = users.length;\r\n                }\r\n\r\n                if (users.length>0) {\r\n                    var usersArray=[];\r\n                    let index=1;\r\n                    val.forEach( (ticket) =>{\r\n                        var hasname = e => e.uid === ticket.uid;\r\n                        let uname= users.find(hasname);\r\n                        if( uname != null){\r\n                            let tt = new Date(uname.create_at).toLocaleString();\r\n                            let tmp = {\r\n                                index: index,\r\n                                username: uname.username,\r\n                                email:uname.email,\r\n                                telnum:uname.telnum,\r\n                                create_at:tt,\r\n                            }\r\n                            index+=1;\r\n                            usersArray.push(tmp);                            \r\n                        }                        \r\n                    });\r\n\r\n                    this.eatusers = usersArray;                    \r\n                    this.ticketLength = this.eatusers.length;                    \r\n                }                \r\n            }\r\n        },\r\n        getAlluserList(val) {\r\n            this.userList = val;         \r\n        }\r\n    },\r\n    computed: {\r\n        getAllTicketList() {        \r\n            return this.$store.state.tickets.allticketList;            \r\n        },\r\n        getAlluserList() {\r\n            return this.$store.state.auth.userList;\r\n        },        \r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.footer{\r\n    padding: 30px;\r\n}\r\n.btile{\r\n    padding: 10px;\r\n}\r\n.total{\r\n    padding: 30px;    \r\n}\r\n.eat{\r\n    color:blue;\r\n}\r\n\r\n</style>","import { render } from \"./TicketCountView.vue?vue&type=template&id=377d5a60&scoped=true\"\nimport script from \"./TicketCountView.vue?vue&type=script&lang=js\"\nexport * from \"./TicketCountView.vue?vue&type=script&lang=js\"\n\nimport \"./TicketCountView.vue?vue&type=style&index=0&id=377d5a60&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-377d5a60\"]])\n\nexport default __exports__"],"names":["style","class","_createElementVNode","scope","key","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_toDisplayString","$data","today_s","_hoisted_3","_hoisted_4","_hoisted_5","_renderList","eatusers","user","uid","_hoisted_6","username","_hoisted_7","email","_hoisted_8","telnum","message","_hoisted_9","_createCommentVNode","_hoisted_10","_createTextVNode","_hoisted_11","ticketLength","usersLength","_hoisted_12","_createVNode","_component_b_container","default","_withCtx","_component_b_row","_component_b_col","cols","_component_b_button","variant","to","size","_","_component_download_excel","data","fields","eatusers_fields","worksheet","name","excelfname","in_ticketLength","ref","components","downloadExcel","JsonExcel","filters","formatDate","value","Date","toLocaleDateString","mounted","this","$store","dispatch","today","year","getFullYear","month","getMonth","day","getDate","todayString","watch","getAllTicketList","val","length","users","state","auth","userList","usersArray","index","forEach","ticket","hasname","e","uname","find","tt","create_at","toLocaleString","tmp","push","getAlluserList","computed","tickets","allticketList","__exports__","render"],"sourceRoot":""}