"use strict";(self["webpackChunkjeju_cafeteria"]=self["webpackChunkjeju_cafeteria"]||[]).push([[393],{1900:function(e,t,a){a.d(t,{Z:function(){return c}});var s=a(6252),i=a(3577);const d={class:"fheader"};function l(e,t,a,l,n,o){const r=(0,s.up)("b-button"),c=(0,s.up)("b-nav"),u=(0,s.up)("b-card-header"),h=(0,s.up)("b-card-text"),m=(0,s.up)("b-card-body"),y=(0,s.up)("b-card");return(0,s.wg)(),(0,s.iD)("div",d,[(0,s.Wm)(y,{title:"Card Title","no-body":""},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{"header-tag":"nav"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{align:"center"},{default:(0,s.w5)((()=>[!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:0,pill:"",size:"sm",variant:"success",to:"/ticketcount"},{default:(0,s.w5)((()=>[(0,s.Uk)("당일식수")])),_:1})),a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:1,pill:"",size:"sm",variant:"success",to:"/userinfo"},{default:(0,s.w5)((()=>[(0,s.Uk)("사용자정보")])),_:1})),!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:2,pill:"",size:"sm",variant:"success",to:"/dayticket"},{default:(0,s.w5)((()=>[(0,s.Uk)("식수확인")])),_:1})),!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:3,pill:"",size:"sm",variant:"success",to:"/useradmin"},{default:(0,s.w5)((()=>[(0,s.Uk)("권한설정")])),_:1})),!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:4,pill:"",size:"sm",variant:"success",to:"/holiday"},{default:(0,s.w5)((()=>[(0,s.Uk)("휴일설정")])),_:1})),!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:5,pill:"",size:"sm",variant:"success",to:"/menu"},{default:(0,s.w5)((()=>[(0,s.Uk)("메뉴입력")])),_:1})),!0!==this.getAuth||a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:6,pill:"",size:"sm",variant:"success",to:"/backupdelete"},{default:(0,s.w5)((()=>[(0,s.Uk)("DB삭제")])),_:1})),a.homeDisplay?((0,s.wg)(),(0,s.j4)(r,{key:7,size:"sm",variant:"success",to:"/home"},{default:(0,s.w5)((()=>[(0,s.Uk)("홈")])),_:1})):(0,s.kq)("",!0),a.homeDisplay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(r,{key:8,size:"sm",variant:"danger",onClick:this.signOut},{default:(0,s.w5)((()=>[(0,s.Uk)("로그아웃")])),_:1},8,["onClick"]))])),_:1})])),_:1}),!0===this.getAuth?((0,s.wg)(),(0,s.j4)(m,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)(" 모든 권한 관리자인 [ "+(0,i.zw)(this.getUserName)+" ]님 환영합니다.",1)])),_:1})])),_:1})):(0,s.kq)("",!0),!1===this.getAuth?((0,s.wg)(),(0,s.j4)(m,{key:1},{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,i.zw)(this.getUserName)+"님 환영합니다. ",1)])),_:1})])),_:1})):(0,s.kq)("",!0)])),_:1})])}var n={computed:{getAuth(){return this.$store.state.auth.user.authority},getUserName(){return this.$store.state.auth.user.username},getEmail(){return this.$store.state.auth.user.email}},methods:{signOut(){this.$store.dispatch("signOut")}},props:{homeDisplay:Boolean}},o=a(3744);const r=(0,o.Z)(n,[["render",l],["__scopeId","data-v-7a75152a"]]);var c=r},7393:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var s=a(6252),i=a(9963),d=a(3577);const l=e=>((0,s.dD)("data-v-35c91a38"),e=e(),(0,s.Cn)(),e),n={class:"tablepick"},o={class:"d-flex justify-content-end"},r=l((()=>(0,s._)("h6",null,"식사선택 : ",-1))),c=["value"],u={class:"mymaincalendar"},h={class:"row"},m={class:"justify-content-center"},y={key:0},g={key:1},p={key:0,class:"mb-3 border bg-warning border-warning rounded p-2",style:{"--bs-bg-opacity":"0.2"}},w=(0,s.uE)('<div class="form-outline" data-v-35c91a38><textarea class="form-control" style="min-width:80%;" rows="1" data-v-35c91a38>변경하신 후, 꼭 확정을 눌러야 반영됩니다.</textarea></div><div class="footer" data-v-35c91a38><div class="d-flex justify-content-center" data-v-35c91a38><button type="submit" class="btn btn-primary" size="lg" data-v-35c91a38>확 정</button></div></div>',2);function k(e,t,a,l,k,D){const f=(0,s.up)("Header"),b=(0,s.up)("VDatePicker");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(f,{homeDisplay:this.homeDisplay},null,8,["homeDisplay"]),(0,s._)("div",n,[(0,s._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...e)=>D.handleSubmit&&D.handleSubmit(...e)),["prevent"]))},[(0,s._)("div",o,[r,(0,s.wy)((0,s._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>k.op_selected=e)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.options,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e.value,value:e.value},(0,d.zw)(e.text),9,c)))),128))],512),[[i.bM,k.op_selected]])]),(0,s._)("div",u,[(0,s._)("div",h,[(0,s._)("div",m,["one"===k.op_selected?((0,s.wg)(),(0,s.iD)("div",y,[(0,s.Wm)(b,{attributes:D.attributes,onDayclick:D.onDayClick,mode:"multiple","disabled-dates":k.disabledDates,color:k.selectedColor,"min-date":k.minDate,"disabled-attribute":k.disabledAttribute,expanded:"",class:"my-calendar"},null,8,["attributes","onDayclick","disabled-dates","color","min-date","disabled-attribute"])])):(0,s.kq)("",!0),"range"===k.op_selected?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)(b,{attributes:D.attributes,onDayclick:D.onRangeClick,range:"","disabled-dates":k.disabledDates,color:k.selectedColor,"min-date":k.minDate,"disabled-attribute":k.disabledAttribute,expanded:"",class:"my-calendar"},null,8,["attributes","onDayclick","disabled-dates","color","min-date","disabled-attribute"])])):(0,s.kq)("",!0)])])]),this.message?((0,s.wg)(),(0,s.iD)("div",p,(0,d.zw)(this.message),1)):(0,s.kq)("",!0),w],32)])],64)}a(560);var D=a(2262),f=a(1900);const b=(0,D.iH)("one"),v=(0,D.iH)("0");var _=(0,D.iH)(),H=(0,D.iH)(),j=(0,D.iH)([]),S=(0,D.iH)([]);const z=(0,D.iH)("white"),x=(0,D.iH)([{text:"하루씩",value:"one"},{text:"범위지정",value:"range"}]),U=(0,D.iH)([{repeat:{weekdays:[1,7]}}]),q=(0,D.iH)([{contentStyle:{color:"red"},contentHoverStyle:{cursor:"default",backgroundColor:"transparent"}}]),C=(0,D.iH)(!1),$=(0,D.iH)([]),A=(0,D.iH)(new Date);var L={name:"HomeView",components:{Header:f.Z},data(){return{days:j,holiday:S,twin_days:[],op_selected:b,options:x,date:new Date,disabledDates:U,selectedColor:z,disabledAttribute:q,newTicket:{id:"",date:"",uid:"",created_at:0},message:"",timer:1,interval:"",homeDisplay:C,meales:$,minDate:A}},computed:{getTicketList(){return this.$store.state.tickets.ticketList},dates(){return this.days.map((e=>e.date))},getHolidayList(){return this.$store.state.holiday.holidayList},holidates(){return this.holiday.map((e=>e.date))},fetchMealdayList(){return this.$store.state.meal.mealList},attributes(){return[{contentStyle:{fontWeight:"700",fontSize:".9rem"},dates:new Date},...this.dates.map((e=>({highlight:"blue",dates:e}))),...this.holidates.map((e=>({highlight:"red",dates:e}))),...this.meales]}},watch:{getTicketList(e){this.days=e;let t=[];e.forEach((e=>{t.push(e)})),this.twin_days=t},getHolidayList(e){e.length>0&&(this.holiday=e)},fetchMealdayList(e){this.meales=[],e.length>0&&e.forEach((e=>{this.meales.push({key:e.id,dates:new Date(e.id),dot:"yellow",popover:{label:e.meal}})}))}},mounted(){this.$store.dispatch("fetchTicketList"),this.$store.dispatch("fetchHolidayList"),this.$store.dispatch("fetchMealdayList"),this.check_time_over()},methods:{onDayClick(e){const t=new Date;let a=!1;const s=6e4*(new Date).getTimezoneOffset(),i=new Date(e.date-s);let d=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),l=new Date(d);if(l.setSeconds(l.getSeconds()+33300),t>=l&&(a=!0),i>l||!a){const t=this.holiday.findIndex((t=>t.id===e.id));if(t<0){const t=this.days.findIndex((t=>t.id===e.id));if(t>=0)this.days.splice(t,1);else{let t=this.dateDisabled(i);t||this.days.push({id:e.id,date:i.toISOString(),uid:this.$store.state.auth.user.uid,created_at:Date.now()})}}}},onRangeClick(e){0==v.value?(v.value=1,_=e.date):(H=e.date,this.getDateRange(_,H))},getDateRange(e,t){let a=new Date(e),s=new Date(t);if(a>s){var i=a;a=s,s=i}while(a<=s){const e=6e4*(new Date).getTimezoneOffset(),t=new Date(a-e);var d={id:t.toISOString().split("T")[0],date:t.toISOString()};const s=this.holiday.findIndex((e=>e.id===d.id));if(s<0){const e=this.days.findIndex((e=>e.id===d.id));if(-1===e){const e=new Date(d.date);let t=this.dateDisabled(e);t||this.days.push({id:d.id,date:d.date,uid:this.$store.state.auth.user.uid,created_at:Date.now()})}}a.setDate(a.getDate()+1)}},async handleSubmit(){let e=[];this.days.forEach((t=>{const a=new Date(t.date);let s=this.dateDisabled(a);s||e.push(t)})),e.forEach((e=>{-1===this.twin_days.indexOf(e)&&this.$store.dispatch("addNewTicket",e)})),this.days=e,this.twin_days.forEach((e=>{-1===this.days.indexOf(e)&&this.$store.dispatch("deleteTicket",e.id)})),this.message="식수 변경이 완료 되었습니다",this.startTimer()},dateDisabled(e){const t=e.getDay();return 0===t||6===t},startTimer(){this.interval=setInterval((()=>{0===this.timer?(clearInterval(this.interval),this.message=""):this.timer--}),100)},check_time_over(){let e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),a=new Date(t);a.setSeconds(a.getSeconds()+33300),this.minDate=e>=a?e.setDate(e.getDate()+1):e}}},T=a(3744);const I=(0,T.Z)(L,[["render",k],["__scopeId","data-v-35c91a38"]]);var O=I}}]);
//# sourceMappingURL=393.75b8f79c.js.map