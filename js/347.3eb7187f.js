"use strict";(self["webpackChunkjeju_cafeteria"]=self["webpackChunkjeju_cafeteria"]||[]).push([[347],{1900:function(e,t,s){s.d(t,{Z:function(){return o}});var a=s(6252),i=s(3577);const l={class:"fheader"};function n(e,t,s,n,u,r){const d=(0,a.up)("b-button"),o=(0,a.up)("b-nav"),c=(0,a.up)("b-card-header"),h=(0,a.up)("b-card-text"),m=(0,a.up)("b-card-body"),p=(0,a.up)("b-card");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(p,{title:"Card Title","no-body":""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"header-tag":"nav"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{align:"center"},{default:(0,a.w5)((()=>[!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:0,pill:"",size:"sm",variant:"success",to:"/ticketcount"},{default:(0,a.w5)((()=>[(0,a.Uk)("당일식수")])),_:1})),s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:1,pill:"",size:"sm",variant:"success",to:"/userinfo"},{default:(0,a.w5)((()=>[(0,a.Uk)("사용자정보")])),_:1})),!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:2,pill:"",size:"sm",variant:"success",to:"/dayticket"},{default:(0,a.w5)((()=>[(0,a.Uk)("식수확인")])),_:1})),!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:3,pill:"",size:"sm",variant:"success",to:"/useradmin"},{default:(0,a.w5)((()=>[(0,a.Uk)("권한설정")])),_:1})),!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:4,pill:"",size:"sm",variant:"success",to:"/holiday"},{default:(0,a.w5)((()=>[(0,a.Uk)("휴일설정")])),_:1})),!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:5,pill:"",size:"sm",variant:"success",to:"/menu"},{default:(0,a.w5)((()=>[(0,a.Uk)("메뉴입력")])),_:1})),!0!==this.getAuth||s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:6,pill:"",size:"sm",variant:"success",to:"/backupdelete"},{default:(0,a.w5)((()=>[(0,a.Uk)("DB삭제")])),_:1})),s.homeDisplay?((0,a.wg)(),(0,a.j4)(d,{key:7,size:"sm",variant:"success",to:"/home"},{default:(0,a.w5)((()=>[(0,a.Uk)("홈")])),_:1})):(0,a.kq)("",!0),s.homeDisplay?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(d,{key:8,size:"sm",variant:"danger",onClick:this.signOut},{default:(0,a.w5)((()=>[(0,a.Uk)("로그아웃")])),_:1},8,["onClick"]))])),_:1})])),_:1}),!0===this.getAuth?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" 모든 권한 관리자인 [ "+(0,i.zw)(this.getUserName)+" ]님 환영합니다.",1)])),_:1})])),_:1})):(0,a.kq)("",!0),!1===this.getAuth?((0,a.wg)(),(0,a.j4)(m,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(this.getUserName)+"님 환영합니다. ",1)])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})])}var u={computed:{getAuth(){return this.$store.state.auth.user.authority},getUserName(){return this.$store.state.auth.user.username},getEmail(){return this.$store.state.auth.user.email}},methods:{signOut(){this.$store.dispatch("signOut")}},props:{homeDisplay:Boolean}},r=s(3744);const d=(0,r.Z)(u,[["render",n],["__scopeId","data-v-7a75152a"]]);var o=d},1347:function(e,t,s){s.r(t),s.d(t,{default:function(){return q}});var a=s(6252),i=s(9963);const l=e=>((0,a.dD)("data-v-19bffeb9"),e=e(),(0,a.Cn)(),e),n={class:"checktickets"},u=l((()=>(0,a._)("h3",null,"[ 데이타베이스 백업하고 지우기 ]",-1))),r={class:"flex justify-center items-center"},d={class:"input-group mb-3"},o=["value"],c=["value"],h=l((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",id:"button-setting"},"기간설정",-1))),m={style:{"margin-left":"40%"}};function p(e,t,s,l,p,g){const k=(0,a.up)("Header"),f=(0,a.up)("v-date-picker"),w=(0,a.up)("download-excel"),_=(0,a.up)("b-container");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,{homeDisplay:this.homeDisplay},null,8,["homeDisplay"]),(0,a._)("div",n,[u,(0,a._)("form",{onSubmit:t[1]||(t[1]=(0,i.iM)(((...e)=>g.selectDateSubmit&&g.selectDateSubmit(...e)),["prevent"])),class:"mainlist"},[(0,a.Wm)(f,{modelValue:p.date_range,"onUpdate:modelValue":t[0]||(t[0]=e=>p.date_range=e),modelModifiers:{range:!0,number:!0},masks:p.masks,"max-date":p.maxDate},{default:(0,a.w5)((({inputValue:e,inputEvents:t})=>[(0,a._)("div",r,[(0,a._)("div",d,[(0,a._)("input",(0,a.dG)({type:"text",class:"form-control",value:e.start},(0,a.mx)(t.start,!0),{"aria-describedby":"button-setting1"}),null,16,o),(0,a._)("input",(0,a.dG)({type:"text",class:"form-control",value:e.end},(0,a.mx)(t.end,!0),{"aria-describedby":"button-setting1"}),null,16,c),h])])])),_:1},8,["modelValue","masks","max-date"])],32),this.download_index?((0,a.wg)(),(0,a.j4)(_,{key:0},{default:(0,a.w5)((()=>[(0,a._)("span",m,[(0,a.Wm)(w,{class:"btn btn-primary",data:this.allTickets,fields:p.tickets_fields,worksheet:"식수",name:this.excelfname,size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("내려받기(엑셀)")])),_:1},8,["data","fields","name"])])])),_:1})):(0,a.kq)("",!0)])],64)}s(560);var g=s(2262),k=s(2633),f=s(1900);const w=(0,g.iH)(!0),_=new Date,D=new Date,y=new Date(D.setMonth(D.getMonth()-1)),b=(0,g.iH)({start:y,end:_}),v=_,x=(0,g.iH)(!1),j=(0,g.iH)(""),U=[],A=(0,g.iH)(!1);var L={name:"UserInfo",components:{Header:f.Z,downloadExcel:k.Z},data(){return{date_range:b,masks:{input:"YYYY-MM-DD"},maxDate:v,s_display:x,excelfname:j,tickets_fields:{"성명":"username","식수일자":"id",uid:"uid","전화번호":"telnum","확정일자":"created_at"},homeDisplay:w,allTickets:U,download_index:A}},computed:{getAllTicketList(){return this.$store.state.tickets.allticketList}},mounted(){this.$store.dispatch("fetchAlluserList"),this.download_index=!1},watch:{getAllTicketList(e){if(e.length>0){let t=this.$store.state.auth.userList;this.usersLength=t.length,t.length<0&&(this.$store.dispatch("fetchAlluserList"),t=this.$store.state.auth.userList),t.length>0&&e.forEach((e=>{var s=t=>t.uid===e.uid;let a=t.find(s);if(null!=a){let t=new Date(e.created_at).toLocaleString();this.allTickets.push({id:e.id,uid:e.uid,username:a.username,telnum:a.telnum,created_at:t})}}))}},getAlluserList(e){this.userList=e}},methods:{selectDateSubmit(){let e=this.getYMD(new Date(b.value.start)),t=this.getYMD(new Date(b.value.end));this.excelfname="jeju_cafeteria_"+e+"_"+t+"_backup.xls";let s=new Date(e),a=new Date(t);if(a.getTime()<s.getTime()){let e=s;s=a,a=e}this.$store.dispatch("fetchAllTicketList",this.getYMD(s)),this.$store.dispatch("deleteDB",this.getYMD(s));while(a>s){s.setDate(s.getDate()+1);let e=this.getYMD(s);this.$store.dispatch("fetchAllTicketList",e),this.$store.dispatch("deleteDB",e)}this.download_index=!0},getYMD(e){const t=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();var i=t+"-";return s<10&&(i+="0"),i+=s+"-",a<10&&(i+="0"),i+=a,i}}},M=s(3744);const $=(0,M.Z)(L,[["render",p],["__scopeId","data-v-19bffeb9"]]);var q=$}}]);
//# sourceMappingURL=347.3eb7187f.js.map