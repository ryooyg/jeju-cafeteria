"use strict";(self["webpackChunkjeju_cafeteria"]=self["webpackChunkjeju_cafeteria"]||[]).push([[867],{6867:function(e,t,s){s.r(t),s.d(t,{default:function(){return O}});var a=s(6252),i=s(3577),n=s(9963);const l=e=>((0,a.dD)("data-v-f7a27416"),e=e(),(0,a.Cn)(),e),d={key:1,class:"d-flex justify-content-center"},c={key:2,class:"user_exit"},r={key:3,class:"user_exit"},o=l((()=>(0,a._)("h2",null,"o",-1))),u=l((()=>(0,a._)("h4",null,"o",-1))),h=[o,u],k={class:"checktickets"},m=l((()=>(0,a._)("h3",null,"[ 기간동안 식수 확인 ]",-1))),f={class:"flex justify-center items-center"},p={class:"input-group mb-3"},_=["value"],w=["value"],b=l((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary",id:"button-setting"},"설정",-1))),g={key:0,class:"mb-2 border bg-warning border-warning rounded p-2",style:{"--bs-bg-opacity":"0.2"}},v={class:"eat"},y={style:{"margin-left":"40%"}},D={key:1,"table-responsive":"",class:"userman"},x={class:"table table-sm table-hover"},j=l((()=>(0,a._)("thead",{class:"thead-dark"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"순번"),(0,a._)("th",{scope:"col"},"일자")])],-1))),q={scope:"row"},C={scope:"row"};function z(e,t,s,l,o,u){const z=(0,a.up)("b-col"),H=(0,a.up)("b-button"),U=(0,a.up)("b-row"),W=(0,a.up)("b-container"),M=(0,a.up)("v-date-picker"),Y=(0,a.up)("download-excel");return(0,a.wg)(),(0,a.iD)(a.HY,null,[!1===this.changepd?((0,a.wg)(),(0,a.j4)(W,{key:0,class:"topcontainer"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,{cols:"4"}),(0,a.Wm)(z,{cols:"2"},{default:(0,a.w5)((()=>[!1===this.define?((0,a.wg)(),(0,a.j4)(H,{key:0,class:"btn",variant:"primary",to:"/home",size:"sm"},{default:(0,a.w5)((()=>[(0,a.Uk)("홈")])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(z,{cols:"3"},{default:(0,a.w5)((()=>[!1===this.define?((0,a.wg)(),(0,a.j4)(H,{key:0,class:"btn",variant:"danger",onClick:u.qdefine,size:"sm"},{default:(0,a.w5)((()=>[(0,a.Uk)("회원탈퇴")])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(z,{cols:"2"})])),_:1})])),_:1})):(0,a.kq)("",!0),!0===this.define?((0,a.wg)(),(0,a.iD)("div",d,[!0===this.define?((0,a.wg)(),(0,a.j4)(H,{key:0,class:"btn",variant:"primary",onClick:u.onCancle,size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("아니오")])),_:1},8,["onClick"])):(0,a.kq)("",!0),!0===this.define?((0,a.wg)(),(0,a.j4)(H,{key:1,class:"btn",variant:"danger",onClick:t[0]||(t[0]=e=>u.onDeleteUser(this.user)),size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("탈퇴 하겠습니까")])),_:1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0),!1===this.define&&!1===this.changepd?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("h2",null,"사용자명 : "+(0,i.zw)(this.user.username),1),(0,a._)("h4",null,"e-mail : "+(0,i.zw)(this.user.email),1)])):(0,a.kq)("",!0),!0===this.define?((0,a.wg)(),(0,a.iD)("div",r,h)):(0,a.kq)("",!0),(0,a._)("div",k,[m,(0,a._)("form",{onSubmit:t[2]||(t[2]=(0,n.iM)(((...e)=>u.selectDateSubmit&&u.selectDateSubmit(...e)),["prevent"])),class:"mainlist"},[(0,a.Wm)(M,{modelValue:o.date_range,"onUpdate:modelValue":t[1]||(t[1]=e=>o.date_range=e),modelModifiers:{range:!0,number:!0},masks:o.masks,"max-date":o.maxDate},{default:(0,a.w5)((({inputValue:e,inputEvents:t})=>[(0,a._)("div",f,[(0,a._)("div",p,[(0,a._)("input",(0,a.dG)({type:"text",class:"form-control",value:e.start},(0,a.mx)(t.start,!0),{"aria-describedby":"button-setting1"}),null,16,_),(0,a._)("input",(0,a.dG)({type:"text",class:"form-control",value:e.end},(0,a.mx)(t.end,!0),{"aria-describedby":"button-setting1"}),null,16,w),b])])])),_:1},8,["modelValue","masks","max-date"])],32),0!=this.totalticket?((0,a.wg)(),(0,a.iD)("div",g,[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a._)("span",v," 총 : "+(0,i.zw)(this.totalticket)+" 일",1),(0,a._)("span",y,[(0,a.Wm)(Y,{class:"btn btn-primary",data:this.tickets,fields:o.tickets_fields,worksheet:"식수",name:this.excelfname,size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("내려받기(엑셀)")])),_:1},8,["data","fields","name"])])])),_:1})])):(0,a.kq)("",!0),this.s_display?((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("table",x,[j,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.tickets,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",q,(0,i.zw)(t+1),1),(0,a._)("td",C,(0,i.zw)(e.id),1)])))),128))])])])):(0,a.kq)("",!0)])],64)}s(560);var H=s(2262),U=s(1120),W=s(2633);const M=(0,H.iH)(!1),Y=(0,H.iH)(!1),L=(0,H.iH)(""),S=(0,H.iH)([]),$=(0,H.iH)(0),V=new Date,E=new Date,T=new Date(E.setMonth(E.getMonth()-1)),Z=(0,H.iH)({start:T,end:V}),G=V,I=(0,H.iH)(!1),B=(0,H.iH)("");var F={name:"UserInfo",components:{downloadExcel:W.Z},data(){return{user:"",define:M,changepd:Y,passwordNew:L,date_range:Z,masks:{input:"YYYY-MM-DD"},maxDate:G,tickets:S,totalticket:$,s_display:I,excelfname:B,tickets_fields:{"번호":"index","식수일자":"id","확정일자":"created_at"}}},computed:{getTicketList(){return this.$store.state.tickets.ticketList}},mounted(){this.user=this.$store.state.auth.user,this.$store.dispatch("fetchTicketList")},watch:{getTicketList(e){this.tickets=e}},methods:{qdefine(){this.define=!this.define},onDeleteUser(e){this.$store.dispatch("fireBaseDeleteUser",e),this.$store.dispatch("signOut")},onCancle(){this.define=!1,U.Z.push("/home")},selectDateSubmit(){const e=new Date,t=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();var i=t+"-";s<10&&(i+="0"),i+=s+"-",a<10&&(i+="0"),i+=a,this.excelfname=this.user.username+"_"+i+"_jejucafeteria.xls";let n=[],l=0;this.tickets.sort(((e,t)=>e.id.localeCompare(t.id))),this.tickets.forEach((e=>{let t=new Date(e.date);if(Z.value.start<=t&&t<=Z.value.end){l+=1;let t=new Date(e.created_at).toLocaleString();n.push({index:l,id:e.id,created_at:t})}}));let d=n;this.tickets=d,this.totalticket=l,this.s_display=!0}}},K=s(3744);const N=(0,K.Z)(F,[["render",z],["__scopeId","data-v-f7a27416"]]);var O=N}}]);
//# sourceMappingURL=867.8e2f85cf.js.map