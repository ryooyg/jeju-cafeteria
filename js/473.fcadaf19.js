"use strict";(self["webpackChunkjeju_cafeteria"]=self["webpackChunkjeju_cafeteria"]||[]).push([[473],{473:function(e,t,s){s.r(t),s.d(t,{default:function(){return W}});var a=s(6252),l=s(3577);const i=e=>((0,a.dD)("data-v-377d5a60"),e=e(),(0,a.Cn)(),e),r={style:{"text-align":"center"},class:"btile"},n=i((()=>(0,a._)("h1",null,"오 늘 식 수",-1))),u={"table-responsive":""},c={class:"table table-sm table-hover"},o=i((()=>(0,a._)("thead",{class:"thead-dark"},[(0,a._)("tr",null,[(0,a._)("th",{scope:"col"},"성 명"),(0,a._)("th",{scope:"col"},"계정메일"),(0,a._)("th",{scope:"col"},"전화번호")])],-1))),h={scope:"row"},d={scope:"row"},g={scope:"row"},m={key:0,class:"mb-3 border bg-warning border-warning rounded p-2",style:{"--bs-bg-opacity":"0.2"}},_={class:"total"},f={class:"eat"},w={class:"footer"};function p(e,t,s,i,p,b){const k=(0,a.up)("b-col"),L=(0,a.up)("b-button"),v=(0,a.up)("download-excel"),D=(0,a.up)("b-row"),y=(0,a.up)("b-container");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[n,(0,a._)("h5",null,"( "+(0,l.zw)(p.today_s)+" )",1)]),(0,a._)("div",u,[(0,a._)("table",c,[o,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.eatusers,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.uid},[(0,a._)("td",h,(0,l.zw)(e.username),1),(0,a._)("td",d,(0,l.zw)(e.email),1),(0,a._)("td",g,(0,l.zw)(e.telnum),1)])))),128))])])]),this.message?((0,a.wg)(),(0,a.iD)("div",m,(0,l.zw)(this.message),1)):(0,a.kq)("",!0),(0,a._)("div",_,[(0,a._)("h3",null,[(0,a.Uk)("오늘 식수 : "),(0,a._)("span",f,(0,l.zw)(this.ticketLength),1),(0,a.Uk)(" /전체 : "+(0,l.zw)(p.usersLength)+" 명",1)])]),(0,a._)("div",w,[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{cols:"2"}),(0,a.Wm)(k,{cols:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{class:"btn",variant:"primary",to:"/home",size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("홈")])),_:1})])),_:1}),(0,a.Wm)(k,{cols:"6"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"btn btn-primary",data:this.eatusers,fields:p.eatusers_fields,worksheet:"이용자",name:this.excelfname,size:"lg"},{default:(0,a.w5)((()=>[(0,a.Uk)("식수 내려받기(엑셀)")])),_:1},8,["data","fields","name"])])),_:1}),(0,a.Wm)(k,{cols:"1"})])),_:1})])),_:1})])],64)}s(560);var b=s(2262),k=s(2633);const L=(0,b.iH)(0),v=(0,b.iH)([]),D=(0,b.iH)("");var y={name:"TicketCount",components:{downloadExcel:k.Z},data(){return{ticketLength:L,eatusers:v,message:"",today_s:"",usersLength:0,eatusers_fields:{"번호":"index","성명":"username","메일":"email","전화번호":"telnum","확정일자":"create_at"},excelfname:D}},filters:{formatDate(e){return new Date(e).toLocaleDateString()}},mounted(){this.$store.dispatch("fetchAlluserList");const e=new Date,t=e.getFullYear(),s=e.getMonth()+1,a=e.getDate();var l=t+"-";s<10&&(l+="0"),l+=s+"-",a<10&&(l+="0"),l+=a,this.excelfname=l+"_jejucafetria.xls",this.today_s=e.getFullYear()+"년  "+e.getMonth()+"월  "+e.getDate()+"일",this.$store.dispatch("fetchAllTicketList",l)},watch:{getAllTicketList(e){if(e.length>0){var t=this.$store.state.auth.userList;if(this.usersLength=t.length,t.length<0&&(this.$store.dispatch("fetchAlluserList"),t=this.$store.state.auth.userList,this.usersLength=t.length),t.length>0){var s=[];let a=1;e.forEach((e=>{var l=t=>t.uid===e.uid;let i=t.find(l);if(null!=i){let e=new Date(i.create_at).toLocaleString(),t={index:a,username:i.username,email:i.email,telnum:i.telnum,create_at:e};a+=1,s.push(t)}})),this.eatusers=s,this.ticketLength=this.eatusers.length}}},getAlluserList(e){this.userList=e}},computed:{getAllTicketList(){return this.$store.state.tickets.allticketList},getAlluserList(){return this.$store.state.auth.userList}}},x=s(3744);const z=(0,x.Z)(y,[["render",p],["__scopeId","data-v-377d5a60"]]);var W=z}}]);
//# sourceMappingURL=473.fcadaf19.js.map